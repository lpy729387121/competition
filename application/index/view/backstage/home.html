<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">

<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta content="" name="description" />
    <meta content="webthemez" name="author" />
    <title>竞赛管理</title>
    <!-- Bootstrap Styles-->
    <link href="/static/assets/css/bootstrap.css" rel="stylesheet" />
    <!-- FontAwesome Styles-->
    <link href="/static/assets/css/font-awesome.css" rel="stylesheet" />
    <!-- Morris Chart Styles-->
    <link href="/static/assets/js/morris/morris-0.4.3.min.css" rel="stylesheet" />
    <!-- Custom Styles-->
    <link href="/static/assets/css/custom-styles.css" rel="stylesheet" />
    <!-- Google Fonts-->
    <link rel="stylesheet" href="/static/assets/js/Lightweight-Chart/cssCharts.css">

    <style type="text/css">

        .demo1{

            height:100px;

        }

    </style>
</head>

<body>
<div id="wrapper">
    <nav class="navbar navbar-default top-navbar" role="navigation">

        <!-- 左边的header -->
        <div class="navbar-header">
            <button type="button" class="navbar-toggle" data-toggle="collapse"
                    data-target=".sidebar-collapse">
                <span class="sr-only">Toggle navigation</span> <span
                    class="icon-bar"></span> <span class="icon-bar"></span> <span
                    class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="index.html"><strong><i
                    class="icon fa fa-plane"></i> 选项</strong></a>

            <div id="sideNav" href="">
                <i class="fa fa-bars icon"></i>
            </div>
        </div>
        <!-- 右边的bar栏目 -->
        <ul class="nav navbar-top-links navbar-right">
            <li class="dropdown"><a class="dropdown-toggle"
                                    data-toggle="dropdown" href="#" aria-expanded="false"> <i
                    class="fa fa-user fa-fw"></i> <i class="fa fa-caret-down"></i>
            </a>
                <ul class="dropdown-menu dropdown-user">
                    <li><a href="{:Url('index/backstage/logout')}"><i class="fa fa-sign-out fa-fw"></i> 注销</a></li>
                </ul> <!-- /.dropdown-user --></li>
            <!-- /.dropdown -->
        </ul>
    </nav>


    <!--/. NAV TOP  -->
    <nav class="navbar-default navbar-side" role="navigation">
        <div class="sidebar-collapse">
            <ul class="nav" id="main-menu">
                <li><a class="active-menu" href="{:url('index/backstage/home')}"><i class="fa fa-dashboard"></i> 竞赛管理</a></li>
            </ul>
        </div>
    </nav>
    <!-- /. NAV SIDE  -->

    <div id="page-wrapper">
        <div class="header">
            <h1 class="page-header">竞赛管理<small>Welcome {$Request.session.user_name}</small></h1>
            <ol class="breadcrumb">
                <li class="active"> 竞赛管理</li>
            </ol>
        </div>
        <div id="page-inner">

            <div class="row">
                <div class="col-md-12">

                    <button type="button" class="btn btn-primary" data-toggle="modal" data-target="#0" style="margin-bottom: 20px;">
                        发布竞赛
                    </button>


                    <div class="modal fade" id="0" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
                        <div class="modal-dialog">
                            <div class="modal-content">
                                <div class="modal-header">
                                    <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
                                    <h4 class="modal-title" id="myModalLabe2">发布竞赛</h4>
                                </div>
                                <div class="modal-body">
                                    <div class="row">
                                        <div class="col-md-8 col-md-offset-2">
                                            <form role="form" method="post" enctype="multipart/form-data" action="{:url('index/backstage/addcompetition')}">
                                                <div class="form-group">
                                                    <label>竞赛名称</label><small style="color: red"> *最多28字</small>
                                                    <input type="text" name="title" value="{$Think.session.title}" class="form-control" maxlength="28">
                                                </div>
                                                <div class="form-group">
                                                    <label>竞赛说明</label><small style="color: red"> *最多300字</small>
                                                    <textarea class="form-control" rows="3" value="{$Think.session.body}" name="body" maxlength="300"></textarea>
                                                </div>
                                                <div class="form-group">
                                                    <label>注意事项</label><small style="color: red"> *最多300字</small>
                                                    <textarea class="form-control" rows="3"  name="warning" maxlength="300"></textarea>
                                                </div>
                                                <div class="form-group">
                                                    <label>竞赛大类数目</label><small style="color: red"> *最多99个</small>
                                                    <input type="text" name="number_type" class="form-control" maxlength="8">
                                                </div>
                                                <div class="form-group">
                                                    <label>竞赛题目总数</label><small style="color: red"> *最多99个</small>
                                                    <input type="text" name="number_title" class="form-control" maxlength="8">
                                                </div>
                                                <div class="form-group">
                                                    <label>赛题说明</label><small style="color: red"> *最多300字</small>
                                                    <textarea class="form-control" rows="3"  name="title_info" maxlength="300"></textarea>
                                                </div>
                                                <div class="form-group">
                                                    <label>其他说明</label><small style=""> 最多300字</small>
                                                    <textarea class="form-control" rows="3"  name="other" maxlength="300"></textarea>
                                                </div>
                                                <div class="form-group">
                                                    <label>每组最多报名人数</label><small style="color: red"> *每组最多报名人数应为大于等于1的整数</small>
                                                    <input type="text" name="number" value="{$Think.session.number}" class="form-control" maxlength="8">
                                                </div>
                                                <label>报名开始时间 :</label><input type="text" id="start_time" name="start_time"> <small style="color: red"> *</small><br/> <br/>
                                                <label>报名截止时间 :</label><input type="text" id="end_time" name="end_time"> <small style="color: red"> *</small><br/> <br/>
                                                <label>提交截止时间 :</label><input type="text" id="commit_time" name="commit_time"> <small style="color: red"> *</small><br/> <br/>
                                                <label>批改截止时间 :</label><input type="text" id="correct_time" name="correct_time"> <small style="color: red"> *</small><br/>
                                                <label></label>
                                                <input type="hidden" name="__token__" value="{$Request.token}" />
                                                <input type="submit" id="submit" class="btn btn-success" value=" 提交 " style="width: 100%">
                                            </form>
                                            <script type="text/javascript" src="/static/time/laydate.dev.js"></script>
                                            <script type="text/javascript">
                                                laydate({

                                                    elem: '#start_time'

                                                });
                                                laydate({

                                                    elem: '#end_time'

                                                });
                                                laydate({

                                                    elem: '#commit_time'

                                                });
                                                laydate({

                                                    elem: '#correct_time'

                                                });
                                            </script>
                                        </div>
                                    </div>
                                </div>
                                <div class="modal-footer">
                                    <button type="button" class="btn btn-default" data-dismiss="modal">关闭</button>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="panel panel-default">
                        <div class="panel-heading" style="min-height: 0">竞赛列表 </div>
                        <div class="panel-body">
                            <div class="table-responsive">
                                <table class="table table-striped table-bordered table-hover">
                                    <thead>
                                    <tr>
                                        <th style="width: 10%">竞赛名称</th>
                                        <th style="width: 10%">大类状态</th>
                                        <th style="width: 10%">题目状态</th>
                                        <th style="width: 10%">报名人数</th>
                                        <th style="width: 10%">是否为当前竞赛</th>
                                        <th style="width: 15%">发布时间</th>
                                        <th style="width: 15%">操作</th>
                                    </tr>
                                    </thead>
                                    <tbody>
                                    {volist name="list" id="list" }

                                    <tr style="min-height: 51px;">
                                        <td style="width: 10%">{$list.title}</td>
                                        <td style="width: 10%">
                                            {if($list.type_status == 1)}
                                            已设置
                                            {/if}
                                            {if($list.type_status == 0)}
                                            未设置
                                            {/if}
                                        </td>
                                        <td style="width: 10%">
                                            {if($list.title_status == 1)}
                                            已设置
                                            {/if}
                                            {if($list.title_status == 0)}
                                            未设置
                                            {/if}
                                        </td>
                                        <td style="width: 10%">{$list.sign}</td>
                                        <td style="width: 10%">
                                            {if($list.status == 1)}
                                            是
                                            {/if}
                                            {if($list.status == 0)}
                                            否
                                            {/if}
                                        </td>
                                        <td style="width: 15%;">{$list.time}</td>
                                        <td style="width: 15%">
                                            {if($list.type_status==0)}
                                            <button type="button" class="btn btn-success" data-toggle="modal" data-target="#{$list.id}" style="margin-bottom: 20px;">
                                                设置竞赛大类
                                            </button>
                                            <div class="modal fade" id="{$list.id}" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
                                                <div class="modal-dialog">
                                                    <div class="modal-content">
                                                        <div class="modal-header">
                                                            <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
                                                            <h4 class="modal-title" id="myModalLabe2">设置竞赛大类</h4>
                                                        </div>
                                                        <div class="modal-body">
                                                            <div class="row">
                                                                <div class="col-md-8 col-md-offset-2">
                                                                    <form role="form" method="post" enctype="multipart/form-data" action="{:url('index/backstage/settype',['id'=>$list['id']])}">
                                                                        {for start="0" end="$list.number_type"}
                                                                        <div class="form-group">
                                                                            <label>大类{$i + 1}</label><small style="color: red"> *最多28字</small>
                                                                            <input type="text" name="type{$i+1}" class="form-control" maxlength="28">
                                                                        </div>
                                                                        {/for}
                                                                        <label></label>
                                                                        <input type="hidden" name="__token__" value="{$Request.token}" />
                                                                        <input type="submit" id="submit2" class="btn btn-success" value=" 确定 " style="width: 100%">
                                                                    </form>
                                                                </div>
                                                            </div>
                                                        </div>
                                                        <div class="modal-footer">
                                                            <button type="button" class="btn btn-default" data-dismiss="modal">关闭</button>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                            {/if}
                                            {if($list.type_status==1)}
                                            {if($list.title_status==0)}
                                            <a href="{:url('index/backstage/title',['id'=>$list['id']])}"><button type="button" class="btn btn-success">设置竞赛题目</button></a>
                                            <!--
                                            <button type="button" class="btn btn-success" data-toggle="modal" data-target="#timu{$list.id}" style="margin-bottom: 20px;">
                                                设置竞赛题目
                                            </button>
                                            <div class="modal fade" id="timu{$list.id}" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
                                                <div class="modal-dialog">
                                                    <div class="modal-content">
                                                        <div class="modal-header">
                                                            <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
                                                            <h4 class="modal-title" id="myModalLabe3">设置竞赛题目</h4>
                                                        </div>
                                                        <div class="modal-body">
                                                            <div class="row">
                                                                <div class="col-md-8 col-md-offset-2">
                                                                    <form role="form" method="post" enctype="multipart/form-data" action="{:url('index/backstage/settitle',['id'=>$list['id']])}">
                                                                        <?php
                                                                        $cnt = 0;
                                                                        ?>
                                                                        {volist name="list->types" id="type" }
                                                                        <?php
                                                                    $type_list = [];
                                                                    $type_id = [];
                                                                    $type_list[$cnt] = $type->title;
                                                                            $type_id[$cnt] = $type->id;
                                                                            $cnt = $cnt + 1;
                                                                        ?>
                                                                        {/volist}

                                                                        {for start="0" end="$list.number_title"}
                                                                        <div class="form-group">
                                                                            <label>题目{$i+1}</label><small style="color: red"> *最多28字</small><br/>
                                                                            所属大类
                                                                            <select name="type{$i+1}">
                                                                                <option value="">请选择</option>
                                                                            </select> <br/>
                                                                            题目
                                                                            <input type="text" name="title{$i+1}" class="form-control" maxlength="28">
                                                                        </div>
                                                                        {/for}
                                                                        <label></label>
                                                                        <input type="hidden" name="__token__" value="{$Request.token}" />
                                                                        <input type="submit" id="submit3" class="btn btn-success" value=" 确定 " style="width: 100%">
                                                                    </form>
                                                                </div>
                                                            </div>
                                                        </div>
                                                        <div class="modal-footer">
                                                            <button type="button" class="btn btn-default" data-dismiss="modal">关闭</button>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                            -->
                                            {/if}
                                            {/if}
                                            {if($list.type_status==1)}
                                            {if($list.title_status==1)}
                                            {if($list.status==0)}
                                            <a href="javascript:if(confirm('竞赛上线将会打断其他竞赛，确定么？'))location='{:url('index/backstage/setonline',['id'=>$list['id']])}'"><button type="button" class="btn btn-success">竞赛上线</button></a>
                                            {/if}
                                            {/if}
                                            {/if}
                                        </td>
                                    </tr>
                                    {/volist}
                                    </tbody>
                                </table>
                                {$page}
                            </div>
                        </div>
                    </div>

            </div>

            <footer>

            </footer>
        </div>
        <!-- /. PAGE INNER  -->
    </div>
    <!-- /. PAGE WRAPPER  -->
</div>
<!-- /. WRAPPER  -->
<!-- JS Scripts-->
<!-- jQuery Js -->
<script src="/static/assets/js/jquery-1.10.2.js"></script>
<!-- Bootstrap Js -->
<script src="/static/assets/js/bootstrap.min.js"></script>

<!-- Metis Menu Js -->
<script src="/static/assets/js/jquery.metisMenu.js"></script>
<!-- Morris Chart Js -->
<script src="/static/assets/js/morris/raphael-2.1.0.min.js"></script>
<script src="/static/assets/js/morris/morris.js"></script>
<script src="/static/assets/js/easypiechart.js"></script>
<script src="/static/assets/js/easypiechart-data.js"></script>
<script src="/static/assets/js/Lightweight-Chart/jquery.chart.js"></script>
<!-- Custom Js -->
<script src="/static/assets/js/custom-scripts.js"></script>
<!-- Chart Js -->
<script type="text/javascript" src="/static/assets/js/Chart.min.js"></script>
<script type="text/javascript" src="/static/assets/js/chartjs.js"></script>

</body>

</html>